{"version":3,"file":"useMapModel.js","sources":["useMapModel.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2023 Open Pioneer project (https://github.com/open-pioneer)\n// SPDX-License-Identifier: Apache-2.0\nimport { useService } from \"open-pioneer:react-hooks\";\nimport { useMemo } from \"react\";\nimport { useAsync } from \"react-use\";\nimport { MapModel, MapRegistry } from \"../api\";\n\n/** Return value of {@link useMapModel}. */\nexport type UseMapModelResult =\n    | {\n          kind: \"loading\" | \"resolved\" | \"rejected\";\n          map?: MapModel | undefined;\n          error?: Error | undefined;\n      }\n    | UseMapModelLoading\n    | UseMapModelResolved\n    | UseMapModelRejected;\n\nexport interface UseMapModelLoading {\n    kind: \"loading\";\n    map?: undefined;\n    error?: undefined;\n}\n\nexport interface UseMapModelResolved {\n    kind: \"resolved\";\n    map: MapModel;\n    error?: undefined;\n}\n\nexport interface UseMapModelRejected {\n    kind: \"rejected\";\n    map?: undefined;\n    error: Error;\n}\n\n/**\n * React hooks that looks up the map with the given id in the `map.MapRegistry` service.\n *\n * Returns an object representing the progress, which will eventually represent either\n * the map model value or an initialization error.\n *\n * The map model cannot be returned directly because it may not have completed its initialization yet.\n */\nexport function useMapModel(mapId: string): UseMapModelResult {\n    const mapRegistry = useService<MapRegistry>(\"map.MapRegistry\");\n    const state = useAsync(() => mapRegistry.getMapModel(mapId), [mapRegistry, mapId]);\n    const result = useMemo((): UseMapModelResult => {\n        if (state.loading) {\n            return { kind: \"loading\" };\n        }\n        if (state.error) {\n            return { kind: \"rejected\", error: state.error };\n        }\n        return { kind: \"resolved\", map: state.value };\n    }, [state]);\n    return result;\n}\n"],"names":[],"mappings":";;;;AA4CO,SAAS,YAAY,KAAA,EAAkC;AAC1D,EAAA,MAAM,WAAA,GAAc,WAAwB,iBAAiB,CAAA;AAC7D,EAAA,MAAM,KAAA,GAAQ,QAAA,CAAS,MAAM,WAAA,CAAY,WAAA,CAAY,KAAK,CAAA,EAAG,CAAC,WAAA,EAAa,KAAK,CAAC,CAAA;AACjF,EAAA,MAAM,MAAA,GAAS,QAAQ,MAAyB;AAC5C,IAAA,IAAI,MAAM,OAAA,EAAS;AACf,MAAA,OAAO,EAAE,MAAM,SAAA,EAAU;AAAA;AAE7B,IAAA,IAAI,MAAM,KAAA,EAAO;AACb,MAAA,OAAO,EAAE,IAAA,EAAM,UAAA,EAAY,KAAA,EAAO,MAAM,KAAA,EAAM;AAAA;AAElD,IAAA,OAAO,EAAE,IAAA,EAAM,UAAA,EAAY,GAAA,EAAK,MAAM,KAAA,EAAM;AAAA,GAChD,EAAG,CAAC,KAAK,CAAC,CAAA;AACV,EAAA,OAAO,MAAA;AACX;;;;"}
{"version":3,"file":"ol-test-support.js","sources":["ol-test-support.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2023 Open Pioneer project (https://github.com/open-pioneer)\n// SPDX-License-Identifier: Apache-2.0\nimport { equals as extentEquals } from \"ol/extent\";\nimport OlMap from \"ol/Map\";\n\nlet setupDone = false;\n\n/** @internal */\nexport function patchOpenLayersClassesForTesting() {\n    if (setupDone) {\n        return;\n    }\n\n    // Test support: OpenLayers relies on div.offsetHeight (and Width)\n    // plus getComputedStyle(div), which do not work as expected in happy dom.\n    // The following snippet fakes a size so tests can work with the map.\n    OlMap.prototype.updateSize = function () {\n        const target = this.getTargetElement();\n        const height = 500;\n        const width = 500;\n        const size = target ? [width, height] : undefined;\n        const oldSize = this.getSize();\n        if (size && (!oldSize || !extentEquals(size, oldSize))) {\n            this.setSize(size);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (this as any).updateViewportSize_();\n        }\n    };\n    setupDone = true;\n}\n"],"names":["extentEquals"],"mappings":";;;AAKA,IAAI,SAAA,GAAY,KAAA;AAGT,SAAS,gCAAA,GAAmC;AAC/C,EAAA,IAAI,SAAA,EAAW;AACX,IAAA;AAAA;AAMJ,EAAA,KAAA,CAAM,SAAA,CAAU,aAAa,WAAY;AACrC,IAAA,MAAM,MAAA,GAAS,KAAK,gBAAA,EAAiB;AACrC,IAAA,MAAM,MAAA,GAAS,GAAA;AACf,IAAA,MAAM,KAAA,GAAQ,GAAA;AACd,IAAA,MAAM,IAAA,GAAO,MAAA,GAAS,CAAC,KAAA,EAAO,MAAM,CAAA,GAAI,MAAA;AACxC,IAAA,MAAM,OAAA,GAAU,KAAK,OAAA,EAAQ;AAC7B,IAAA,IAAI,SAAS,CAAC,OAAA,IAAW,CAACA,MAAA,CAAa,IAAA,EAAM,OAAO,CAAA,CAAA,EAAI;AACpD,MAAA,IAAA,CAAK,QAAQ,IAAI,CAAA;AAEjB,MAAC,KAAa,mBAAA,EAAoB;AAAA;AACtC,GACJ;AACA,EAAA,SAAA,GAAY,IAAA;AAChB;;;;"}
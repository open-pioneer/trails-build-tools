{"version":3,"file":"ExternalEventServiceImpl.js","sources":["ExternalEventServiceImpl.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2023 Open Pioneer project (https://github.com/open-pioneer)\n// SPDX-License-Identifier: Apache-2.0\nimport { ApplicationContext, Service, ServiceOptions } from \"@open-pioneer/runtime\";\nimport { ExternalEventService } from \"./api\";\n\ninterface References {\n    ctx: ApplicationContext;\n}\n\nexport class ExternalEventServiceImpl implements Service<ExternalEventService> {\n    #ctx: ApplicationContext;\n\n    constructor({ references }: ServiceOptions<References>) {\n        this.#ctx = references.ctx;\n    }\n\n    emitEvent(name: string, detail?: unknown): void;\n    emitEvent(event: Event): void;\n    emitEvent(nameOrEvent: string | Event, detail: unknown = null) {\n        if (nameOrEvent == null) {\n            return;\n        }\n\n        if (nameOrEvent instanceof Event) {\n            this.#dispatch(nameOrEvent);\n            return;\n        }\n\n        const event = new CustomEvent(nameOrEvent, {\n            bubbles: false,\n            cancelable: false,\n            detail\n        });\n        this.#dispatch(event);\n    }\n\n    #dispatch(event: Event) {\n        this.#ctx.getHostElement().dispatchEvent(event);\n    }\n}\n"],"names":[],"mappings":"AASO,MAAM,wBAAA,CAAkE;AAAA,EAC3E,IAAA;AAAA,EAEA,WAAA,CAAY,EAAE,UAAA,EAAW,EAA+B;AACpD,IAAA,IAAA,CAAK,OAAO,UAAA,CAAW,GAAA;AAAA;AAC3B,EAIA,SAAA,CAAU,WAAA,EAA6B,MAAA,GAAkB,IAAA,EAAM;AAC3D,IAAA,IAAI,eAAe,IAAA,EAAM;AACrB,MAAA;AAAA;AAGJ,IAAA,IAAI,uBAAuB,KAAA,EAAO;AAC9B,MAAA,IAAA,CAAK,UAAU,WAAW,CAAA;AAC1B,MAAA;AAAA;AAGJ,IAAA,MAAM,KAAA,GAAQ,IAAI,WAAA,CAAY,WAAA,EAAa;AAAA,MACvC,OAAA,EAAS,KAAA;AAAA,MACT,UAAA,EAAY,KAAA;AAAA,MACZ;AAAA,KACH,CAAA;AACD,IAAA,IAAA,CAAK,UAAU,KAAK,CAAA;AAAA;AACxB,EAEA,UAAU,KAAA,EAAc;AACpB,IAAA,IAAA,CAAK,IAAA,CAAK,cAAA,EAAe,CAAE,aAAA,CAAc,KAAK,CAAA;AAAA;AAEtD;;;;"}